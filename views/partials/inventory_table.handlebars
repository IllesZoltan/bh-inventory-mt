
<div class="modal fade" id="stockModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="stockModalLabel">Termék mennyiség</h5>

                <!-- data-dismiss="modal"  -->
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                </button>

            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-4">
                        <label for="count">Mennyiség</label>
                    </div>
                    <div class="col-8 text-center">
                        <input type="number" id="count" name="count" value="0">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <!-- data-dismiss="modal"  -->
                <button type="button" class="btn btn-secondary mr-auto" data-dismiss="modal">Mégsem</button>
                <button type="button" class="btn btn-primary" onclick="saving()" data-dismiss="modal">OK</button>
            </div>
        </div>
    </div>
</div>



<div class="table-responsive">
    <table class="table table-bordered table-hover">
        <thead class="thead-light">
            <tr>
                <th class="text-center">ID</th>
                <th class="text-center">Megnevezés</th>
                <th class="text-center">Mennyiség</th>
                <th class="text-center">Műveletek</th>
            </tr>
        </thead>
        <tbody>
            {{#each stockArr}}
            <tr>
                <th class="text-center" id="id">{{this.rowid}}</th>
                <td class="text-center" id="name">{{this.name}}</td>
                <td class="text-center" id="count">{{this.count}}</td>
                <td class="text-center">
                    <button type="button" class="btn btn-secondary" name="{{this.name}}" onclick="nstock(this.name)" data-id={{this.rowid}}>Szerkesztés</button>
                </td>
            </tr>
            {{/each}}
        </tbody>
    </table>
</div>

{{> footer }}


<script>
    let allElementsArr = [];
    let name = "";
    let id = 0;

    function nstock(theName){
        document.getElementById('stockModalLabel').innerHTML = theName+' módosítás'

        id = parseInt(event.target.dataset.id)
        name = theName
        $('#stockModal').modal('show')
    }

    function saving(){
        let cnt = document.getElementById('count').value
        const data = `${id},${name},${cnt}`

        console.log('data:-',data)

        fetch(`http://localhost:3000/stock_update/${data}`, {method: 'PUT'})

        document.getElementById('count').value = 0
    }
</script>


<!-- ha kötőjellel megy az id, mint data-id
evemt.target.dataset.id -->